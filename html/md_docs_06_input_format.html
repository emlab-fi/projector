<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Projector: Input format</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Projector
   </div>
   <div id="projectbrief">Monte Carlo Photon transport simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_docs_06_input_format.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Input format </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md41">Main file</a><ul><li class="level2"><a href="#autotoc_md42">Fields</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md43">Material file</a><ul><li class="level2"><a href="#autotoc_md44">Fields</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md45">Object file</a><ul><li class="level2"><a href="#autotoc_md46">Geometry fields</a></li>
<li class="level2"><a href="#autotoc_md47">Object fields</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md48">Tally file</a><ul><li class="level2"><a href="#autotoc_md49">Fields</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Projector uses <a href="https://www.json.org/json-en.html">JSON</a> files for defining the simulation input. The input is split into 4 JSON files. This way, it's easier to reuse parts of the input data between multiple simulations and the files are also shorter and easier to read. The files are split into a main file, material definitions, object definitions and tallies. Various definitions in separate files are linked together using user-defined string IDs.</p>
<h1><a class="anchor" id="autotoc_md41"></a>
Main file</h1>
<p>The main file contains configuration of the simulator itself and the paths to other required files.</p>
<h2><a class="anchor" id="autotoc_md42"></a>
Fields</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">field   </th><th class="markdownTableHeadCenter">type   </th><th class="markdownTableHeadLeft">description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>name</code>   </td><td class="markdownTableBodyCenter"><code>string</code>   </td><td class="markdownTableBodyLeft">name of the simulation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>description</code>   </td><td class="markdownTableBodyCenter"><code>string</code>   </td><td class="markdownTableBodyLeft">user description of the simulation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>save_particle_paths</code>   </td><td class="markdownTableBodyCenter"><code>bool</code>   </td><td class="markdownTableBodyLeft">Whether to save particle paths    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>seed</code>   </td><td class="markdownTableBodyCenter"><code>uint</code>   </td><td class="markdownTableBodyLeft">PRNG seed    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>energy_cutoff</code>   </td><td class="markdownTableBodyCenter"><code>float</code>   </td><td class="markdownTableBodyLeft">Energy cutoff value in kEv    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>stack_size</code>   </td><td class="markdownTableBodyCenter"><code>uint</code>   </td><td class="markdownTableBodyLeft">The maximum history length for single particle    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>bounding_box</code>   </td><td class="markdownTableBodyCenter"><code>[[float]]</code>   </td><td class="markdownTableBodyLeft">Array of min and max coordinates of the simulation (example bellow)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>material_file</code>   </td><td class="markdownTableBodyCenter"><code>string</code>   </td><td class="markdownTableBodyLeft">Path to the material JSON file    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>object_file</code>   </td><td class="markdownTableBodyCenter"><code>string</code>   </td><td class="markdownTableBodyLeft">Path to the objects JSON file    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>tallies_file</code>   </td><td class="markdownTableBodyCenter"><code>string</code>   </td><td class="markdownTableBodyLeft">Path to the tallies JSON file    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>output_path</code>   </td><td class="markdownTableBodyCenter"><code>string</code>   </td><td class="markdownTableBodyLeft">Output path (where to save output data)   </td></tr>
</table>
<p>Example of bounding box field: </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;bounding_box&quot;: [[0.0, 0.0, 0.0], [2.5, 3.0, 1.0]]</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md43"></a>
Material file</h1>
<p>This file provides an array of material definitions like this: </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;materials&quot;: [</div>
<div class="line">        {/* material 1 */},</div>
<div class="line">        {/* material 2 */},</div>
<div class="line">        //......</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md44"></a>
Fields</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">field   </th><th class="markdownTableHeadCenter">type   </th><th class="markdownTableHeadLeft">description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>id</code>   </td><td class="markdownTableBodyCenter"><code>string</code>   </td><td class="markdownTableBodyLeft">id of the material    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>density</code>   </td><td class="markdownTableBodyCenter"><code>float</code>   </td><td class="markdownTableBodyLeft">Density of the material in \( g/cm^2 \)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>elements</code>   </td><td class="markdownTableBodyCenter"><code>[string]</code>   </td><td class="markdownTableBodyLeft">Array of elements in the material    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>atomic_percentage</code>   </td><td class="markdownTableBodyCenter"><code>[float]</code>   </td><td class="markdownTableBodyLeft">Array of atomic percentages of the elements    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>weight_percentage</code>   </td><td class="markdownTableBodyCenter"><code>[float]</code>   </td><td class="markdownTableBodyLeft">Array of weight percentages of the elements   </td></tr>
</table>
<p>Elements are defined as their periodic table symbols. Currently elements of atomic number up to 100 are supported (fermium). There is a special element <code>void</code>, which means no element. This can be used to simulate vacuum voids in materials or a vacuum in general.</p>
<p>When both atomic percentages and weight percentages are present, the atomic percentages are taken as input. The percentages do not have to add up to 1, the values are normalized when loaded. This means you can for example use <code>[1, 3]</code> as input and it will get normalized to <code>[0.25, 0.75]</code>. Care must be taken so that the percentage array is the same length as the elements array.</p>
<h1><a class="anchor" id="autotoc_md45"></a>
Object file</h1>
<p>This file defines the geometry of the simulation and links the geometry to used materials from the materials JSON file. It's structure is bit more involved, as the geometry definitions can be recursive and are in a separate JSON object, compared to the object definition.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;geometries&quot;: {</div>
<div class="line">        &quot;geom1&quot;: { /* geom definition */ },</div>
<div class="line">        &quot;geom2&quot;: { /* geom definition */ },</div>
<div class="line">        //......</div>
<div class="line">    },</div>
<div class="line">    &quot;objects&quot;: [</div>
<div class="line">        { /* object definition */ },</div>
<div class="line">        { /* object definition */ },</div>
<div class="line">        //......</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md46"></a>
Geometry fields</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">field   </th><th class="markdownTableHeadCenter">type   </th><th class="markdownTableHeadLeft">description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>operators</code>   </td><td class="markdownTableBodyCenter"><code>[string]</code>   </td><td class="markdownTableBodyLeft">What operators to apply to the surfaces/geometries. Valid operations are <code>join</code>, <code>intersect</code>, <code>substract</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>surfaces</code>   </td><td class="markdownTableBodyCenter"><code>[string / object]</code>   </td><td class="markdownTableBodyLeft">The surfaces defining the geometry. It can also refer to another existing geometry. Surfaces are defined by two arguments, more on that below.   </td></tr>
</table>
<p>When defining a surface, there are two arguments: <code>type</code> and <code>parameters</code>. Below is table of possible surfaces and their parameters. The parameters should be identical to the ones in <a class="el" href="md_docs_02_geometry.html">geometry docs</a> and are written as they are accepted by a parser.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">surface   </th><th class="markdownTableHeadNone">parameters    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>plane</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], [a, b, c]</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ellipsoid</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], a, b, c</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>x_cylinder</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], a, b</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>y_cylinder</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], a, b</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>z_cylinder</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], a, b</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>x_cone</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], a, b, c</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>y_cone</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], a, b, c</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>z_cone</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], a, b, c</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>box</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], [x1, y1, z1]</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>capped_x_cylinder</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], a, b, h</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>capped_y_cylinder</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], a, b, h</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>capped_z_cylinder</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], a, b, h</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>capped_x_cone</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], a, b, c, d1, d2</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>capped_y_cone</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], a, b, c, d1, d2</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>capped_z_cone</code>   </td><td class="markdownTableBodyNone"><code>[x0, y0, z0], a, b, c, d1, d2</code>   </td></tr>
</table>
<p>There should be no cyclic or self references when using geometries in place of surfaces, as this will not parse.</p>
<p>The operations array should be the same length as the surfaces array. The surfaces and their operators are applied sequentially in the same order as they are defined. So if we have surfaces <code>A, B, C</code> with operators <code>intersect, substract, join</code>, the end geometry will be <code>((_ intersect A) substract B) join C</code>. The first surface should always have <code>intersect</code> operator.</p>
<p>It is best to see an example at the end of this page.</p>
<h2><a class="anchor" id="autotoc_md47"></a>
Object fields</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">field   </th><th class="markdownTableHeadCenter">type   </th><th class="markdownTableHeadLeft">description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>id</code>   </td><td class="markdownTableBodyCenter"><code>string</code>   </td><td class="markdownTableBodyLeft">user defined object ID, mostly for easier identification in tallies    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>geometry</code>   </td><td class="markdownTableBodyCenter"><code>string</code>   </td><td class="markdownTableBodyLeft">the name of the geometry for the object, must be a key in <code>geometries</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>material</code>   </td><td class="markdownTableBodyCenter"><code>string</code>   </td><td class="markdownTableBodyLeft">the object material ID, must be a valid material in the materials JSON file    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>bounding_box</code>   </td><td class="markdownTableBodyCenter"><code>[[float]]</code>   </td><td class="markdownTableBodyLeft">optional bounding box of the object, if not present it's approximated automatically from the geometry (for an example see main file docs)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>source</code>   </td><td class="markdownTableBodyCenter"><code>json object</code>   </td><td class="markdownTableBodyLeft">optional object defining the particle source properties of the object   </td></tr>
</table>
<p>When the <code>source</code> field is present, the object is considered as a source of particles. The fields for the <code>source</code> are the following:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">field   </th><th class="markdownTableHeadCenter">type   </th><th class="markdownTableHeadLeft">description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>photon_energy</code>   </td><td class="markdownTableBodyCenter"><code>float</code>   </td><td class="markdownTableBodyLeft">photon energy in MEv    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>photon_count</code>   </td><td class="markdownTableBodyCenter"><code>uint</code>   </td><td class="markdownTableBodyLeft">how many photons originate from this source    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>direction</code>   </td><td class="markdownTableBodyCenter"><code>[x, y, z]</code>   </td><td class="markdownTableBodyLeft">direction of the photons    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>spread</code>   </td><td class="markdownTableBodyCenter"><code>float</code>   </td><td class="markdownTableBodyLeft">cosine of angle of maximum spread away from the direction   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md48"></a>
Tally file</h1>
<p>This file describes the tallies to calculate. The tallies are defined in similar manner to the material file, an array <code>tallies</code> containing the tally objects with the fields.</p>
<p>More details on tallies are here: <a class="el" href="md_docs_03_tallies.html">tallies</a>.</p>
<h2><a class="anchor" id="autotoc_md49"></a>
Fields</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">field   </th><th class="markdownTableHeadCenter">type   </th><th class="markdownTableHeadLeft">description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>id</code>   </td><td class="markdownTableBodyCenter"><code>string</code>   </td><td class="markdownTableBodyLeft">user supplied ID for easy identification    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>type</code>   </td><td class="markdownTableBodyCenter"><code>string</code>   </td><td class="markdownTableBodyLeft">type of the tally, currently only <code>uniform_mesh</code> is supported    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>score</code>   </td><td class="markdownTableBodyCenter"><code>string</code>   </td><td class="markdownTableBodyLeft">the physical quantity to evaluate    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>parameters</code>   </td><td class="markdownTableBodyCenter"><code>object</code>   </td><td class="markdownTableBodyLeft">parameters for the tally, depend on the type   </td></tr>
</table>
<p>The <code>parameters</code> entry is an object of more key-value pairs. The keys depend on the type of the tally, short overview of required keys for tallies is bellow.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">tally type   </th><th class="markdownTableHeadLeft">required parameters   </th><th class="markdownTableHeadLeft">supported scores    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>uniform_mesh</code>   </td><td class="markdownTableBodyLeft"><code>start</code>, <code>end</code>, <code>resolution</code>   </td><td class="markdownTableBodyLeft"><code>flux</code>, <code>average_energy</code>, <code>interaction_counts</code>, <code>deposited_energy</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>volume</code>   </td><td class="markdownTableBodyLeft"><code>object_id</code>   </td><td class="markdownTableBodyLeft"><code>flux</code>, <code>average_energy</code>, <code>interaction_counts</code>, <code>deposited_energy</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>scintillator</code>   </td><td class="markdownTableBodyLeft" colspan="2"><code>object_id</code>, <code>energy_range_bins</code>, <code>energy_max</code>   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
