Projector uses \href{https://www.json.org/json-en.html}{\texttt{ JSON}} files for defining the simulation input. The input is split into 4 JSON files. This way, it\textquotesingle{}s easier to reuse parts of the input data between multiple simulations and the files are also shorter and easier to read. The files are split into a main file, material definitions, object definitions and tallies. Various definitions in separate files are linked together using user-\/defined string IDs.\hypertarget{md_docs_06_input_format_autotoc_md41}{}\doxysection{Main file}\label{md_docs_06_input_format_autotoc_md41}
The main file contains configuration of the simulator itself and the paths to other required files.\hypertarget{md_docs_06_input_format_autotoc_md42}{}\doxysubsection{Fields}\label{md_docs_06_input_format_autotoc_md42}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ type   }&\cellcolor{\tableheadbgcolor}\textbf{ description    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ type   }&\cellcolor{\tableheadbgcolor}\textbf{ description    }\\\cline{1-3}
\endhead
{\ttfamily name}   &\PBS\centering {\ttfamily string}   &name of the simulation    \\\cline{1-3}
{\ttfamily description}   &\PBS\centering {\ttfamily string}   &user description of the simulation    \\\cline{1-3}
{\ttfamily save\+\_\+particle\+\_\+paths}   &\PBS\centering {\ttfamily bool}   &Whether to save particle paths    \\\cline{1-3}
{\ttfamily seed}   &\PBS\centering {\ttfamily uint}   &PRNG seed    \\\cline{1-3}
{\ttfamily energy\+\_\+cutoff}   &\PBS\centering {\ttfamily float}   &Energy cutoff value in k\+Ev    \\\cline{1-3}
{\ttfamily stack\+\_\+size}   &\PBS\centering {\ttfamily uint}   &The maximum history length for single particle    \\\cline{1-3}
{\ttfamily bounding\+\_\+box}   &\PBS\centering {\ttfamily \mbox{[}\mbox{[}float\mbox{]}\mbox{]}}   &Array of min and max coordinates of the simulation (example bellow)    \\\cline{1-3}
{\ttfamily material\+\_\+file}   &\PBS\centering {\ttfamily string}   &Path to the material JSON file    \\\cline{1-3}
{\ttfamily object\+\_\+file}   &\PBS\centering {\ttfamily string}   &Path to the objects JSON file    \\\cline{1-3}
{\ttfamily tallies\+\_\+file}   &\PBS\centering {\ttfamily string}   &Path to the tallies JSON file    \\\cline{1-3}
{\ttfamily output\+\_\+path}   &\PBS\centering {\ttfamily string}   &Output path (where to save output data)   \\\cline{1-3}
\end{longtabu}


Example of bounding box field\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{    "{}bounding\_box"{}: [[0.0, 0.0, 0.0], [2.5, 3.0, 1.0]]}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_docs_06_input_format_autotoc_md43}{}\doxysection{Material file}\label{md_docs_06_input_format_autotoc_md43}
This file provides an array of material definitions like this\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{    "{}materials"{}: [}
\DoxyCodeLine{        \{/* material 1 */\},}
\DoxyCodeLine{        \{/* material 2 */\},}
\DoxyCodeLine{        //......}
\DoxyCodeLine{    ]}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_docs_06_input_format_autotoc_md44}{}\doxysubsection{Fields}\label{md_docs_06_input_format_autotoc_md44}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ type   }&\cellcolor{\tableheadbgcolor}\textbf{ description    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ type   }&\cellcolor{\tableheadbgcolor}\textbf{ description    }\\\cline{1-3}
\endhead
{\ttfamily id}   &\PBS\centering {\ttfamily string}   &id of the material    \\\cline{1-3}
{\ttfamily density}   &\PBS\centering {\ttfamily float}   &Density of the material in $ g/cm^2 $    \\\cline{1-3}
{\ttfamily elements}   &\PBS\centering {\ttfamily \mbox{[}string\mbox{]}}   &Array of elements in the material    \\\cline{1-3}
{\ttfamily atomic\+\_\+percentage}   &\PBS\centering {\ttfamily \mbox{[}float\mbox{]}}   &Array of atomic percentages of the elements    \\\cline{1-3}
{\ttfamily weight\+\_\+percentage}   &\PBS\centering {\ttfamily \mbox{[}float\mbox{]}}   &Array of weight percentages of the elements   \\\cline{1-3}
\end{longtabu}


Elements are defined as their periodic table symbols. Currently elements of atomic number up to 100 are supported (fermium). There is a special element {\ttfamily void}, which means no element. This can be used to simulate vacuum voids in materials or a vacuum in general.

When both atomic percentages and weight percentages are present, the atomic percentages are taken as input. The percentages do not have to add up to 1, the values are normalized when loaded. This means you can for example use {\ttfamily \mbox{[}1, 3\mbox{]}} as input and it will get normalized to {\ttfamily \mbox{[}0.\+25, 0.\+75\mbox{]}}. Care must be taken so that the percentage array is the same length as the elements array.\hypertarget{md_docs_06_input_format_autotoc_md45}{}\doxysection{Object file}\label{md_docs_06_input_format_autotoc_md45}
This file defines the geometry of the simulation and links the geometry to used materials from the materials JSON file. It\textquotesingle{}s structure is bit more involved, as the geometry definitions can be recursive and are in a separate JSON object, compared to the object definition.


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{    "{}geometries"{}: \{}
\DoxyCodeLine{        "{}geom1"{}: \{ /* geom definition */ \},}
\DoxyCodeLine{        "{}geom2"{}: \{ /* geom definition */ \},}
\DoxyCodeLine{        //......}
\DoxyCodeLine{    \},}
\DoxyCodeLine{    "{}objects"{}: [}
\DoxyCodeLine{        \{ /* object definition */ \},}
\DoxyCodeLine{        \{ /* object definition */ \},}
\DoxyCodeLine{        //......}
\DoxyCodeLine{    ]}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_docs_06_input_format_autotoc_md46}{}\doxysubsection{Geometry fields}\label{md_docs_06_input_format_autotoc_md46}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ type   }&\cellcolor{\tableheadbgcolor}\textbf{ description    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ type   }&\cellcolor{\tableheadbgcolor}\textbf{ description    }\\\cline{1-3}
\endhead
{\ttfamily operators}   &\PBS\centering {\ttfamily \mbox{[}string\mbox{]}}   &What operators to apply to the surfaces/geometries. Valid operations are {\ttfamily join}, {\ttfamily intersect}, {\ttfamily substract}    \\\cline{1-3}
{\ttfamily surfaces}   &\PBS\centering {\ttfamily \mbox{[}string / object\mbox{]}}   &The surfaces defining the geometry. It can also refer to another existing geometry. Surfaces are defined by two arguments, more on that below.   \\\cline{1-3}
\end{longtabu}


When defining a surface, there are two arguments\+: {\ttfamily type} and {\ttfamily parameters}. Below is table of possible surfaces and their parameters. The parameters should be identical to the ones in \mbox{\hyperlink{md_docs_02_geometry}{geometry docs}} and are written as they are accepted by a parser.

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ surface   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ parameters    }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ surface   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ parameters    }\\\cline{1-2}
\endhead
{\ttfamily plane}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, \mbox{[}a, b, c\mbox{]}}    \\\cline{1-2}
{\ttfamily ellipsoid}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, a, b, c}    \\\cline{1-2}
{\ttfamily x\+\_\+cylinder}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, a, b}    \\\cline{1-2}
{\ttfamily y\+\_\+cylinder}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, a, b}    \\\cline{1-2}
{\ttfamily z\+\_\+cylinder}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, a, b}    \\\cline{1-2}
{\ttfamily x\+\_\+cone}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, a, b, c}    \\\cline{1-2}
{\ttfamily y\+\_\+cone}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, a, b, c}    \\\cline{1-2}
{\ttfamily z\+\_\+cone}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, a, b, c}    \\\cline{1-2}
{\ttfamily box}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, \mbox{[}x1, y1, z1\mbox{]}}    \\\cline{1-2}
{\ttfamily capped\+\_\+x\+\_\+cylinder}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, a, b, h}    \\\cline{1-2}
{\ttfamily capped\+\_\+y\+\_\+cylinder}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, a, b, h}    \\\cline{1-2}
{\ttfamily capped\+\_\+z\+\_\+cylinder}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, a, b, h}    \\\cline{1-2}
{\ttfamily capped\+\_\+x\+\_\+cone}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, a, b, c, d1, d2}    \\\cline{1-2}
{\ttfamily capped\+\_\+y\+\_\+cone}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, a, b, c, d1, d2}    \\\cline{1-2}
{\ttfamily capped\+\_\+z\+\_\+cone}   &{\ttfamily \mbox{[}x0, y0, z0\mbox{]}, a, b, c, d1, d2}   \\\cline{1-2}
\end{longtabu}


There should be no cyclic or self references when using geometries in place of surfaces, as this will not parse.

The operations array should be the same length as the surfaces array. The surfaces and their operators are applied sequentially in the same order as they are defined. So if we have surfaces {\ttfamily A, B, C} with operators {\ttfamily intersect, substract, join}, the end geometry will be {\ttfamily ((\+\_\+ intersect A) substract B) join C}. The first surface should always have {\ttfamily intersect} operator.

It is best to see an example at the end of this page.\hypertarget{md_docs_06_input_format_autotoc_md47}{}\doxysubsection{Object fields}\label{md_docs_06_input_format_autotoc_md47}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ type   }&\cellcolor{\tableheadbgcolor}\textbf{ description    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ type   }&\cellcolor{\tableheadbgcolor}\textbf{ description    }\\\cline{1-3}
\endhead
{\ttfamily id}   &\PBS\centering {\ttfamily string}   &user defined object ID, mostly for easier identification in tallies    \\\cline{1-3}
{\ttfamily geometry}   &\PBS\centering {\ttfamily string}   &the name of the geometry for the object, must be a key in {\ttfamily geometries}    \\\cline{1-3}
{\ttfamily material}   &\PBS\centering {\ttfamily string}   &the object material ID, must be a valid material in the materials JSON file    \\\cline{1-3}
{\ttfamily bounding\+\_\+box}   &\PBS\centering {\ttfamily \mbox{[}\mbox{[}float\mbox{]}\mbox{]}}   &optional bounding box of the object, if not present it\textquotesingle{}s approximated automatically from the geometry (for an example see main file docs)    \\\cline{1-3}
{\ttfamily source}   &\PBS\centering {\ttfamily json object}   &optional object defining the particle source properties of the object   \\\cline{1-3}
\end{longtabu}


When the {\ttfamily source} field is present, the object is considered as a source of particles. The fields for the {\ttfamily source} are the following\+:

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ type   }&\cellcolor{\tableheadbgcolor}\textbf{ description    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ type   }&\cellcolor{\tableheadbgcolor}\textbf{ description    }\\\cline{1-3}
\endhead
{\ttfamily photon\+\_\+energy}   &\PBS\centering {\ttfamily float}   &photon energy in MEv    \\\cline{1-3}
{\ttfamily photon\+\_\+count}   &\PBS\centering {\ttfamily uint}   &how many photons originate from this source    \\\cline{1-3}
{\ttfamily direction}   &\PBS\centering {\ttfamily \mbox{[}x, y, z\mbox{]}}   &direction of the photons    \\\cline{1-3}
{\ttfamily spread}   &\PBS\centering {\ttfamily float}   &cosine of angle of maximum spread away from the direction   \\\cline{1-3}
\end{longtabu}
\hypertarget{md_docs_06_input_format_autotoc_md48}{}\doxysection{Tally file}\label{md_docs_06_input_format_autotoc_md48}
This file describes the tallies to calculate. The tallies are defined in similar manner to the material file, an array {\ttfamily tallies} containing the tally objects with the fields.

More details on tallies are here\+: \mbox{\hyperlink{md_docs_03_tallies}{tallies}}.\hypertarget{md_docs_06_input_format_autotoc_md49}{}\doxysubsection{Fields}\label{md_docs_06_input_format_autotoc_md49}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ type   }&\cellcolor{\tableheadbgcolor}\textbf{ description    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ field   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ type   }&\cellcolor{\tableheadbgcolor}\textbf{ description    }\\\cline{1-3}
\endhead
{\ttfamily id}   &\PBS\centering {\ttfamily string}   &user supplied ID for easy identification    \\\cline{1-3}
{\ttfamily type}   &\PBS\centering {\ttfamily string}   &type of the tally, currently only {\ttfamily uniform\+\_\+mesh} is supported    \\\cline{1-3}
{\ttfamily score}   &\PBS\centering {\ttfamily string}   &the physical quantity to evaluate    \\\cline{1-3}
{\ttfamily parameters}   &\PBS\centering {\ttfamily object}   &parameters for the tally, depend on the type   \\\cline{1-3}
\end{longtabu}


The {\ttfamily parameters} entry is an object of more key-\/value pairs. The keys depend on the type of the tally, short overview of required keys for tallies is bellow.

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ tally type   }&\cellcolor{\tableheadbgcolor}\textbf{ required parameters   }&\cellcolor{\tableheadbgcolor}\textbf{ supported scores    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ tally type   }&\cellcolor{\tableheadbgcolor}\textbf{ required parameters   }&\cellcolor{\tableheadbgcolor}\textbf{ supported scores    }\\\cline{1-3}
\endhead
{\ttfamily uniform\+\_\+mesh}   &{\ttfamily start}, {\ttfamily end}, {\ttfamily resolution}   &{\ttfamily flux}, {\ttfamily average\+\_\+energy}, {\ttfamily interaction\+\_\+counts}, {\ttfamily deposited\+\_\+energy}    \\\cline{1-3}
{\ttfamily volume}   &{\ttfamily object\+\_\+id}   &{\ttfamily flux}, {\ttfamily average\+\_\+energy}, {\ttfamily interaction\+\_\+counts}, {\ttfamily deposited\+\_\+energy}    \\\cline{1-3}
{\ttfamily scintillator}   &\multicolumn{2}{l|}{{\ttfamily object\+\_\+id}, {\ttfamily energy\+\_\+range\+\_\+bins}, {\ttfamily energy\+\_\+max}   }\\\cline{1-3}
\end{longtabu}
